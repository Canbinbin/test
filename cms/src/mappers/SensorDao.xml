<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cms.web.modules.dao.SensorDao">

	<!-- 通用查询结果列-->
	<sql id="Base_Column_List">
		 id, unique_id, expire, filter_type, filter_value, point_type, description,command_resend_time,create_time,update_time,name,owner,parent
	</sql>
	
	
	<resultMap type="Sensor" id="SensorResult">
		<id column="id" property="id"/>
		<result column="unique_id" property="uniqueId"/>
		<result column="expire" property="expire"/>
		<result column="filter_type" property="filterType"/>
		<result column="filter_value" property="filterValue"/>
		<result column="point_type"  property="pointTpe"/>
		<result column="description" property="description"/>
		<result column="command_resend_time" property="commandRendTime"/>
		<result column="create_time" property="createTime"/>
		<result column="update_time" property="updateTime"/>
		<result column="name" property="name"/>
		<result column="owner" property="owner"/>
		<result column="parent" property="parent"/>
	</resultMap>

	<select id="findAll" resultMap="SensorResult">
		select * from tb_point where 1 = 1 order by update_time		
	</select>
	
	<select id="find" parameterType="Long" resultMap="SensorResult">
		select * from tb_point where 1 =1 and id=#{value}
	</select>
	
	<select id="findByUserId" parameterType="Long" resultMap="SensorResult">
		select * from tb_point where 1 =1 and owner=#{value}
	</select>
	
	<!-- 分页查询 -->
    <select id="findPage" parameterType="Long" resultMap="SensorResult">
        SELECT * FROM tb_point where user_id=#{value}
    </select>
	<!-- 新增 -->
	<insert id="insert" parameterType="Sensor" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
		INSERT INTO `tb_point` ( `id`, `user_id`,  `sen_name`,`sen_type`, `sen_chan`, `curve`, `sen_open`, `sen_time`, `org_id`)  
		VALUES (#{id}, #{userId}, #{senName},  #{senType}, #{senChan},  #{curve}, #{senOpen}, #{senTime},#{orgId}) 
	</insert>
	
	<!-- 修改 -->
	<update id="update" parameterType="Sensor">
		UPDATE 
	  	`tb_point` 
	  	<set>
	  		<trim prefix="" suffixOverrides=",">
			  	<if test="senName != null">
		  			`sen_name` = #{senName},
		  		</if>
		  		<if test="senType != null">
		  			 `sen_type` = #{senType},
		  		</if>
			  	<if test="senChan != null">
			  		`sen_chan` = #{senChan},
			  	</if>
			  	<if test="curve != null">
				  `curve` = #{curve},
			  	</if>
			 	<if test="senOpen != null">
			 		 `sen_open` = #{senOpen},
			 	</if>
			  	<if test="senTime != null">
			  		 `sen_time` = #{senTime},	
			  	</if>
	  		</trim>
	  	</set>
		WHERE `id` = #{id} 
	</update>
	
	<!-- 删除 -->
	<delete id="delete" parameterType="Long">
		 delete from tb_point where id = ${value}
	</delete>

</mapper>